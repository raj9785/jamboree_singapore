<?phpclass HomeStatisticsController extends HomeStatisticAppController {    /**     * Controller name     *     * @var string     */    var $name = 'HomeStatistics';    public $helpers = array('Html', 'Form', 'Session', 'Time', 'Text');    public $components = array('Auth', 'Session', 'Email', 'Cookie', 'Search.Prg', 'RequestHandler');    public $presetVars = array(array('field' => 'email', 'type' => 'value'), array('field' => 'firstname', 'type' => 'value'), array('field' => 'username', 'type' => 'value'), array('field' => 'mobile', 'type' => 'value'), array('field' => 'user_role_id', 'type' => 'value'), array('field' => 'status', 'type' => 'value'));    //public $presetVars = 	true;    public function beforeFilter() {        parent::beforeFilter();        $this->set('model', $this->modelClass);        $this->set('tab_open', 'cms');    }    public function index() {        $conditions = array();        $conditions = array();        $limitValue = $limit = 25;        $page = ((isset($this->params->named['page']) && $this->params->named['page'] != "") ? $this->params->named['page'] : 0);        $this->set('limitValue', $limitValue);        $this->set('limit', $limit);        $this->set('page', $page);        $this->paginate = array(            'conditions' => $conditions,            'limit' => 25,            'order' => array(                'HomeStatistic.created_on' => 'DESC'            )        );        $this->set('records', $this->paginate('HomeStatistic'));        $this->set('title_for_layout', 'Home Statistics');    }    public function edit() {        $user_id = $this->params->query['id'];        $conditions = array(            "HomeStatistic.id" => $user_id,        );        if (!$user_id || $user_id == NULL) {            $this->Session->setFlash('Invalid request to edit home_statistic', 'error');            $this->redirect(array('plugin' => 'home_statistic', 'controller' => 'home_statistics', 'action' => 'index'));        } else {// check that user exists or not            $check_user_exists = $this->HomeStatistic->Find('count', array('conditions' => $conditions, 'recursive' => -1));            if ($check_user_exists == 0) {                $this->Session->setFlash('HomeStatistic does not exists', 'error');                $this->redirect(array('plugin' => 'home_statistic', 'controller' => 'home_statistics', 'action' => 'index'));            }        }        $users_data = $this->HomeStatistic->find('first', array('conditions' => $conditions));        $this->set('users_data', $users_data);        if ($this->request->is('post') || $this->request->is('put')) {            $this->request->data['HomeStatistic']['updated_on'] = date("Y-m-d H:i:s");            if ($this->HomeStatistic->save($this->request->data)) {                $json_data = json_encode($this->request->data);                $text_action = "updated";                $this->global_logs("home_statistics", $user_id, 1, $text_action, $json_data);                $this->Session->setFlash(__('Home Statistic updated successfully'), 'success');                $this->redirect(array('plugin' => 'home_statistic', 'controller' => 'home_statistics', 'action' => 'index'));            } else {                $this->Session->setFlash('Home Statistic couldn\'t be updated, try again later', 'error');            }        } else {            $this->data = $users_data;        }        $this->set('title_for_layout', 'Update Home Statistic');    }}